window.__require=function t(e,n,o){function i(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){return i(e[r][1][t]||t)},p,p.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({Ball:[function(t,e,n){"use strict";cc._RF.push(e,"4c3c7K5ctpOfrtonhjUazWj","Ball"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.ball,this.getComponent(cc.PhysicsCollider).tag=this._mTag},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],BathClip:[function(t,e,n){"use strict";cc._RF.push(e,"f3ab79ShRZOprX6MTCgOrhQ","BathClip"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.node.zIndex=o.LocalZOrder.bathClip},__decorate([a],e)}(cc.Component));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],CameraController:[function(t,e,n){"use strict";cc._RF.push(e,"ba8e5OOsftEhbhgsVlqlS2P","CameraController"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./InputMgr"),i=t("./LevelMgr"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftTopMask=null,e.rightBottomMask=null,e.minRatio=.2,e.maxRatio=1.3,e.mCurrentRatio=1,e.ZOOM_SPEED=.02,e.camera=null,e.visibleSize=null,e.leftBound=0,e.rightBound=0,e.topBound=0,e.bottomBound=0,e.pointerPos=null,e.followX=390,e.followY=260,e.minFollowDistance=30,e.needFollow=!1,e.isIntroduction=!1,e.touches={},e.kPinchZoomCoeff=.1,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.Instance=this;var t=cc.find("Canvas");t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancle,this)},e.prototype.start=function(){this.camera=this.getComponent(cc.Camera),this.mCurrentRatio=this.camera.zoomRatio,this.visibleSize=cc.view.getVisibleSize(),this.leftBound=this.leftTopMask.x,this.rightBound=this.rightBottomMask.x,this.topBound=this.leftTopMask.y,this.bottomBound=this.rightBottomMask.y,this.initPosition=this.node.position,i.default.Instance.showIntroduce&&this.startIntroduce()},e.prototype.lateUpdate=function(){this.updateZoom(),this.followShark(),this.updateBoundaries()},e.prototype.updateZoom=function(){(o.default.Instance.isKeyPressed(o.GAME_KEY.ZOOM_IN)||o.default.Instance.isKeyHeld(o.GAME_KEY.ZOOM_IN))&&(this.mCurrentRatio-=this.ZOOM_SPEED,this.mCurrentRatio<this.minRatio&&(this.mCurrentRatio=this.minRatio)),(o.default.Instance.isKeyPressed(o.GAME_KEY.ZOOM_OUT)||o.default.Instance.isKeyHeld(o.GAME_KEY.ZOOM_OUT))&&(this.mCurrentRatio+=this.ZOOM_SPEED,this.mCurrentRatio>this.maxRatio&&(this.mCurrentRatio=this.maxRatio)),this.camera.zoomRatio=this.mCurrentRatio},e.prototype.followShark=function(){if(i.default.Instance.isSharkMoving()||i.default.Instance.isSharkGrabbed()){var t=i.default.Instance.getCurrentShark().node,e=this.node.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),n=Math.abs(e.x-this.node.position.x),o=Math.abs(e.y-this.node.position.y);(n>=this.followX||o>=this.followY)&&(this.needFollow=!0),this.needFollow&&(this.node.position=this.node.position.lerp(e,.025),e.sub(this.node.position).mag()<=this.minFollowDistance&&(this.needFollow=!1))}},e.prototype.startIntroduce=function(){var t=this,e=this.visibleSize.width/2/this.camera.zoomRatio,n=(this.node.x,this.node.x,cc.v2(this.leftBound+e,0)),o=cc.v2(this.rightBound-e,0),a=cc.moveTo((o.x-this.node.position.x)/800,o),r=cc.moveTo((o.x-n.x)/800,n),s=i.default.Instance.getCurrentShark().node,c=this.node.parent.convertToNodeSpaceAR(s.parent.convertToWorldSpaceAR(s.position));this.node.position=c;var l=cc.moveTo((this.initPosition.x-n.x)/800,this.initPosition);this.node.runAction(cc.sequence(cc.delayTime(1),a,r,l,cc.callFunc(function(){t.isIntroduction=!1,i.default.Instance.setState(i.LevelState.ShowInfo)})))},e.prototype.updateBoundaries=function(){var t=this.visibleSize.width/2/this.camera.zoomRatio,e=this.visibleSize.height/2/this.camera.zoomRatio,n=this.node.x-t,o=this.node.x+t,i=this.node.y-e,a=this.node.y+e;n<=this.leftBound&&(this.node.x=this.leftBound+t),i<=this.bottomBound&&(this.node.y=this.bottomBound+e),o>=this.rightBound&&(this.node.x=this.rightBound-t),a>=this.topBound&&(this.node.y=this.topBound-e)},e.prototype.onTouchBegan=function(t){var e=t.touch.getID();this.touches[e]=t.getLocation()},e.prototype.onTouchEnd=function(t){delete this.touches[t.touch.getID()]},e.prototype.onTouchCancle=function(t){delete this.touches[t.touch.getID()]},e.prototype.onTouchMove=function(t){if(!i.default.Instance.isSharkGrabbed()&&!this.isIntroduction)if(Object.entries(this.touches).length>1)this.pinchZoomWithMovedTouch(t);else{var e=t.getPreviousLocation(),n=t.getLocation(),o=e.sub(n),a=this.node.position.add(o);this.node.position=this.node.position.lerp(a,.3)}},e.prototype.pinchZoomWithMovedTouch=function(t){for(var e=3e5,n=null,o=t.touch.getLocation(),i=t.touch.getID(),a=0,r=Object.entries(this.touches);a<r.length;a++){var s=r[a],c=s[0];if(s[1],c!=i){var l=this.touches[c],p=l.sub(o).mag();p<e&&(e=p,n=l)}}if(n){var d=n.sub(t.touch.getPreviousLocation()).mag(),u=Math.sqrt(e)-Math.sqrt(d);this.mCurrentRatio+=u*this.kPinchZoomCoeff,this.mCurrentRatio<this.minRatio&&(this.mCurrentRatio=this.minRatio),this.mCurrentRatio>this.maxRatio&&(this.mCurrentRatio=this.maxRatio)}},e.Instance=null,__decorate([s(cc.Node)],e.prototype,"leftTopMask",void 0),__decorate([s(cc.Node)],e.prototype,"rightBottomMask",void 0),__decorate([s],e.prototype,"minRatio",void 0),__decorate([s],e.prototype,"maxRatio",void 0),n=__decorate([r],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./InputMgr":"InputMgr","./LevelMgr":"LevelMgr"}],Chain:[function(t,e,n){"use strict";cc._RF.push(e,"877eaIlmU1AqIXPM7PlRf+X","Chain"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canCut=!1,e._parent=null,e}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.chain,this.getComponent(cc.PhysicsCollider).tag=this._mTag},e.prototype.onBeginContact=function(t,e,n){this._canCut&&n.tag==o.EntityTag.shark&&(t.disabled=!0,this._parent.cutTheRope(this.node))},e.prototype.enableCut=function(t){this._canCut=!0,this._parent=t},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],DropLet:[function(t,e,n){"use strict";cc._RF.push(e,"7fe24sBH3RMk6lzRMc/1GbS","DropLet"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Gravity=.2,e}return __extends(e,t),e.prototype.start=function(){this.Position=this.node.position},e.prototype.update=function(){this.Velocity.y+=this.Gravity,this.Position=this.Position.sub(this.Velocity),this.node.position=this.Position;var t=cc.misc.radiansToDegrees(Math.atan2(-this.Velocity.y,this.Velocity.x))+90;this.node.rotation=t,this.node.position.y<110&&this.node.removeFromParent()},e.prototype.GetAngle=function(t){return Math.atan2(t.y,t.x)},__decorate([i],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],Duck:[function(t,e,n){"use strict";cc._RF.push(e,"bb53aXO361M5KIN9YslLKH0","Duck"),Object.defineProperty(n,"__esModule",{value:!0}),n.DuckState=void 0;var o,i=t("./Entity"),a=t("../LevelMgr"),r=t("../sound-manager"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.DeepInWater=0]="DeepInWater",t[t.InTheAir=1]="InTheAir",t[t.Falling=2]="Falling",t[t.EnterWater=3]="EnterWater",t[t.Swimming=4]="Swimming"})(o=n.DuckState||(n.DuckState={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bubble=null,e.display=null,e.state=o.InTheAir,e._isRemoving=!1,e.movingSpeed=300,e._actionEnterWater=null,e}return __extends(e,t),e.prototype.init=function(){this._mTag=i.EntityTag.duck,this.getComponent(cc.PhysicsCollider).tag=this._mTag},e.prototype.onBeginContact=function(t,e,n){n.tag==i.EntityTag.shark?(r.default.instance.playEffect("sfx_duck_eaten_1"),t.disabled=!0,this.node.removeFromParent(),a.default.Instance.onSharkEat(this._mTag)):n.tag==i.EntityTag.sponge?this.state==o.Swimming?(t.disabled=!0,this.rgbody.linearVelocity=cc.Vec2.ZERO,this.rgbody.awake=!0,this.movingSpeed*=-1,this.movingSpeed>0?this.display.scaleX=-1:this.display.scaleX=1):(this.changeRigidBodyType(cc.RigidBodyType.Dynamic),null!=this.bubble&&(this.state=o.Falling,this.bubble.removeFromParent())):n.tag==i.EntityTag.duck?(this.changeRigidBodyType(cc.RigidBodyType.Dynamic),t.disabled=!0):n.tag==i.EntityTag.salt?(this.changeRigidBodyType(cc.RigidBodyType.Dynamic),this.rgbody.gravityScale=10,t.disabledOnce=!0,null!=this.bubble&&this.bubble.removeFromParent(),this.state=o.Falling):n.tag==i.EntityTag.greenBlock&&(this.state==o.Swimming?(t.disabled=!0,this.rgbody.linearVelocity=cc.Vec2.ZERO,this.movingSpeed*=-1,this.movingSpeed>0?this.display.scaleX=-1:this.display.scaleX=1):(this.changeRigidBodyType(cc.RigidBodyType.Dynamic),this.rgbody.gravityScale=10,t.disabledOnce=!0,t.setFriction(10),t.setRestitution(0),null!=this.bubble&&this.bubble.removeFromParent(),this.state=o.Falling))},e.prototype.onLeaveWater=function(){this.state=o.InTheAir,null!=this._actionEnterWater&&(this.node.stopAction(this._actionEnterWater),this._actionEnterWater=null)},e.prototype.onEnterWater=function(){var t=this;this.state!=o.EnterWater&&this.state!=o.Swimming&&(this.state=o.EnterWater,null!=this.bubble&&this.bubble.removeFromParent(),this._actionEnterWater=cc.sequence(cc.delayTime(2),cc.callFunc(function(){t.rgbody.fixedRotation=!0,t.state=o.Swimming,t.rgbody.linearVelocity=cc.Vec2.ZERO})),this.node.runAction(this._actionEnterWater))},e.prototype.applyDamge=function(){var t=this;this._isRemoving||(this._isRemoving=!0,this.scheduleOnce(function(){a.default.Instance.onSharkEat(t._mTag),t.node.removeFromParent()}))},e.prototype.lateUpdate=function(){this.state==o.Swimming&&this.swimmingUpdate()},e.prototype.swimmingUpdate=function(){this.rgbody.linearVelocity=cc.v2(this.movingSpeed,0)},__decorate([l(cc.Node)],e.prototype,"bubble",void 0),__decorate([l(cc.Node)],e.prototype,"display",void 0),__decorate([l({type:cc.Enum(o)})],e.prototype,"state",void 0),__decorate([c],e)}(i.default);n.default=p,cc._RF.pop()},{"../LevelMgr":"LevelMgr","../sound-manager":"sound-manager","./Entity":"Entity"}],DynSponge:[function(t,e,n){"use strict";cc._RF.push(e,"19997OFJUBJar6dAU/stm87","DynSponge"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.dynSponge,this.getComponent(cc.PhysicsCollider).tag=this._mTag},e.prototype.onBeginContact=function(t,e,n){n.tag!=o.EntityTag.shark&&n.tag!=o.EntityTag.sponge&&n.tag!=o.EntityTag.duck||(t.disabledOnce=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic))},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],Entity:[function(t,e,n){"use strict";cc._RF.push(e,"0e6feMbEdRJXqAvb7uX9gIg","Entity"),Object.defineProperty(n,"__esModule",{value:!0}),n.EntityTag=n.LocalZOrder=void 0;var o,i=cc._decorator,a=i.ccclass,r=i.property;(function(t){t[t.speedFloaterBack=0]="speedFloaterBack",t[t.shark=1]="shark",t[t.speedFloaterFront=2]="speedFloaterFront",t[t.duck=3]="duck",t[t.coin=4]="coin",t[t.piper=5]="piper",t[t.inflatable=6]="inflatable",t[t.sponge=7]="sponge",t[t.greenBlock=8]="greenBlock",t[t.mine=9]="mine",t[t.salt=10]="salt",t[t.ball=11]="ball",t[t.chain=12]="chain",t[t.water=13]="water",t[t.bathClip=14]="bathClip"})(n.LocalZOrder||(n.LocalZOrder={})),function(t){t[t.shark=1]="shark",t[t.warter=2]="warter",t[t.duck=3]="duck",t[t.pipe_outside=4]="pipe_outside",t[t.pipe_wall_1=5]="pipe_wall_1",t[t.pipe_wall_2=6]="pipe_wall_2",t[t.inflatable=7]="inflatable",t[t.sponge=8]="sponge",t[t.monkey=9]="monkey",t[t.dynSponge=10]="dynSponge",t[t.speedFloater=11]="speedFloater",t[t.speedFloaterBound=12]="speedFloaterBound",t[t.speedFloater4ChangeZindex=13]="speedFloater4ChangeZindex",t[t.goldenCoin=14]="goldenCoin",t[t.greenBlock=15]="greenBlock",t[t.mine=16]="mine",t[t.mine_radius=17]="mine_radius",t[t.salt=18]="salt",t[t.ball=19]="ball",t[t.chain=20]="chain",t[t.unknown=21]="unknown"}(o=n.EntityTag||(n.EntityTag={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rgbody=null,e.previewBody=null,e.isInPipe=!1,e._mTag=o.unknown,e.reduceWaterPhysicForce=1,e._currentRigidBodyType=cc.RigidBodyType.Dynamic,e}return __extends(e,t),e.prototype.start=function(){this.rgbody=this.getComponent(cc.RigidBody),this._currentRigidBodyType=this.rgbody.type,this.init()},e.prototype.OnPipeInTrigger=function(){this.isInPipe=!0},e.prototype.OnPipeOutTrigger=function(){this.isInPipe=!1},e.prototype.createPreviewBody=function(t){var e=this.rgbody._b2Body,n=new b2.BodyDef;n.position=e.GetTransform().GetPosition(),n.type=b2.BodyType.b2_dynamicBody,this.previewBody=t.CreateBody(n);var o=e.GetFixtureList().GetShape(),i=new b2.FixtureDef;i.isSensor=!1,i.shape=o,i.density=e.GetFixtureList().GetDensity(),i.restitution=e.GetFixtureList().GetRestitution(),i.friction=e.GetFixtureList().GetFriction(),this.previewBody.CreateFixture(i),this.previewBody.SetGravityScale(e.m_gravityScale),this.previewBody.SetLinearDamping(e.m_linearDamping)},e.prototype.changeRigidBodyType=function(t){var e=this;this._currentRigidBodyType!=t&&(this._currentRigidBodyType=t,this.node.runAction(cc.callFunc(function(){e.rgbody._b2Body.SetAwake(!1),e.rgbody.type=e._currentRigidBodyType})))},e.prototype.applyDamge=function(){},e.prototype.onEnterWater=function(){},e.prototype.onLeaveWater=function(){},__decorate([r],e.prototype,"reduceWaterPhysicForce",void 0),__decorate([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],Global:[function(t,e){"use strict";cc._RF.push(e,"906502N/DRJWJ3i50n06aVq","Global"),cc._RF.pop()},{}],GoldenCoin:[function(t,e,n){"use strict";cc._RF.push(e,"b0944hmIO5A9amHEOZKl7B4","GoldenCoin"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=t("../LevelMgr"),a=t("../sound-manager"),r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OFFSET=50,e.isGoing2Shark=!1,e.movingSpeed=5,e.remainingTime=.1,e}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.goldenCoin,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.coin},e.prototype.onBeginContact=function(t,e,n){n.tag==o.EntityTag.shark&&(this.isGoing2Shark=!0)},e.prototype.update=function(t){this.isGoing2Shark&&this.MoveToShark(t)},e.prototype.MoveToShark=function(t){var e=this.node.parent.convertToNodeSpaceAR(i.default.Instance.getCurrentShark().getWorkSpacePosition()).sub(this.node.position);if(e.mag()<32||this.remainingTime<=0)this.onSharkEatMe();else{this.remainingTime-=t;var n=this.node.position.add(e.normalize().mul(this.movingSpeed));this.node.position=n,this.movingSpeed+=2*t}},e.prototype.onSharkEatMe=function(){this.node.removeFromParent(),i.default.Instance.onSharkEat(this._mTag),a.default.instance.playEffect("sfx_coin")},__decorate([s],e)}(o.default));n.default=c,cc._RF.pop()},{"../LevelMgr":"LevelMgr","../sound-manager":"sound-manager","./Entity":"Entity"}],GreenBlock:[function(t,e,n){"use strict";cc._RF.push(e,"bf8c9f5laxAmqZkZGL1xj5L","GreenBlock"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.restitutionForce=0,e.frictionForce=.2,e}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.greenBlock,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.greenBlock},e.prototype.onBeginContact=function(t,e,n){n.tag==o.EntityTag.shark&&(t.setRestitution(this.restitutionForce),t.setFriction(this.frictionForce),cc.log(this.restitutionForce,this.frictionForce))},__decorate([r],e.prototype,"restitutionForce",void 0),__decorate([r],e.prototype,"frictionForce",void 0),__decorate([a],e)}(o.default);n.default=s,cc._RF.pop()},{"./Entity":"Entity"}],Inflatable:[function(t,e,n){"use strict";cc._RF.push(e,"cfa43b3n8VN5YkVp14ISnUS","Inflatable"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.inflatable,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.inflatable},e.prototype.onBeginContact=function(t,e,n){var i=this;n.tag==o.EntityTag.shark?(t.disabled=!0,this.getComponent(cc.PhysicsCollider).sensor=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic),this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){i.node.removeFromParent()})))):n.tag==o.EntityTag.sponge?(t.disabled=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic)):n.tag==o.EntityTag.salt&&this.changeRigidBodyType(cc.RigidBodyType.Dynamic)},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],InputMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a2387QAQ6ZPj6uPsIjDz52I","InputMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.GAME_KEY=void 0;var o,i=cc._decorator,a=i.ccclass;i.property,function(t){t[t.NONE=1]="NONE",t[t.UP=2]="UP",t[t.DOWN=4]="DOWN",t[t.LEFT=8]="LEFT",t[t.RIGHT=16]="RIGHT",t[t.FIRE=32]="FIRE",t[t.ZOOM_IN=64]="ZOOM_IN",t[t.ZOOM_OUT=128]="ZOOM_OUT"}(o=n.GAME_KEY||(n.GAME_KEY={}));var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pointerPos=null,e}var n;return __extends(e,t),n=e,Object.defineProperty(e.prototype,"pointerPosition",{get:function(){return this._pointerPos},enumerable:!1,configurable:!0}),e.prototype.start=function(){var t=cc.find("Canvas");t.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onLoad=function(){n.Instance=this},e.prototype.lateUpdate=function(){this.updateKey()},e.prototype.onTouchBegan=function(t){this._pointerPos=t.getLocation()},e.prototype.onTouchEnd=function(){this._pointerPos=null},e.prototype.onTouchMove=function(t){this._pointerPos=t.getLocation()},e.prototype.onKeyDown=function(t){var e=this.getKeyMask(t.keyCode);this._keysPress|=e,this._keysRelease&=~e},e.prototype.onKeyUp=function(t){this._keysRelease|=this.getKeyMask(t.keyCode)},e.prototype.getKeyMask=function(t){switch(cc.log(t),t){case cc.macro.KEY["+"]:return o.ZOOM_OUT;case cc.macro.KEY["-"]:return o.ZOOM_IN;default:return o.NONE}},e.prototype.updateKey=function(){var t=this._keysCurrent;this._keysCurrent&=~this._keysRelease,this._keysCurrent|=this._keysPress,this._keysRelease&=this._keysPress,this._keysPress=0,this._keysPressed=this._keysCurrent&~t,this._keysReleased=t&~this._keysCurrent},e.prototype.isKeyPressed=function(t){return 0!=(this._keysPressed&t)},e.prototype.isKeyReleased=function(t){return 0!=(this._keysReleased&t)},e.prototype.isKeyHeld=function(t){return 0!=(this._keysCurrent&t)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.Instance=null,n=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],LevelMgr:[function(t,e,n){"use strict";cc._RF.push(e,"b00ee80q8ZAVIHuhgDm3h9O","LevelMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.LevelState=void 0;var o,i=t("./SharkController"),a=t("./Entities/Entity"),r=t("./sound-manager"),s=t("./PopUpDlg"),c=t("./TransportMessage"),l=cc._decorator,p=l.ccclass,d=l.property;(function(t){t[t.Init=0]="Init",t[t.ShowInfo=1]="ShowInfo",t[t.Play=2]="Play",t[t.Pause=3]="Pause",t[t.End=4]="End"})(o=n.LevelState||(n.LevelState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._score=0,e._coin=0,e._levelState=o.Init,e.MaxStep=3,e.NumDucks=3,e.lableScore=null,e.lableNewLevel=null,e.lableEndLevel=null,e.currentLevel=0,e.showIntroduce=!1,e.Step=0,e._currentTotalDuck=0,e._previewWorld=null,e.myShark=null,e}var n;return __extends(e,t),n=e,Object.defineProperty(e.prototype,"Score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previewWorld",{get:function(){return this._previewWorld},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this._levelState},enumerable:!1,configurable:!0}),e.prototype.setState=function(t){this._levelState!=t&&(this._levelState=t,this._levelState==o.ShowInfo&&this.onShowLevelInfo())},e.prototype.getCurrentShark=function(){return this.myShark},e.prototype.onChangedShark=function(t){this.myShark=t},e.prototype.isSharkMoving=function(){return this.myShark.state==i.SharkState.k_moving},e.prototype.isSharkGrabbed=function(){return this.myShark.state==i.SharkState.k_grabbed},e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,n.Instance=this,this.createPreviewWorld(),this._currentTotalDuck=0,this.lableEndLevel.string="Level "+(this.currentLevel+1)+" Clear",this.lableNewLevel.string="Level "+(this.currentLevel+1),this.lableEndLevel.node.active=!1,this.lableNewLevel.node.active=!1,this._levelState=o.Init},e.prototype.start=function(){cc.director.getPhysicsManager().enabledAccumulator=!1,cc.PhysicsManager.VELOCITY_ITERATIONS=n.FIX_VELOCITY_ITERATIONS,cc.PhysicsManager.POSITION_ITERATIONS=n.FIX_POSITION_ITERATIONS,cc.PhysicsManager.FIXED_TIME_STEP=n.FIX_TIME_PHYSIC;var t=cc.director.getPhysicsManager();(t=cc.director.getPhysicsManager()).update=function(){var e=t._world;if(e&&t.enabled){t.emit("before-step"),t._steping=!0;var n=.55/cc.game.config.frameRate;e.Step(n,10,10),e.DrawDebugData(),t._steping=!1;for(var o=t._delayEvents,i=0;i<o.length;i++){var a=o[i];a&&a.target[a.func].apply(a.target,a.args)}o.length=0,t._syncNode()}},this.showIntroduce||this.onShowLevelInfo(),r.default.instance.playMusic("m_level",!0)},e.prototype.onSharkEat=function(t){this._score+=10,this.lableScore.string=this._score.toString(),t==a.EntityTag.duck?this._currentTotalDuck++:t==a.EntityTag.goldenCoin&&this._coin++,this._currentTotalDuck>=this.NumDucks&&this.onEndLevel()},e.prototype.onShowLevelInfo=function(){var t=this;this.lableNewLevel.node.position=cc.v2(0,480),this.lableNewLevel.node.active=!0,this.lableNewLevel.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,0)),cc.delayTime(.7),cc.moveTo(.5,cc.v2(-1e3,0)),cc.callFunc(function(){t.lableNewLevel.node.active=!1,t.setState(o.Play)})))},e.prototype.onEndLevel=function(){var t=this;if(this._levelState!=o.End){this._levelState=o.End;var e=c.default.instance.get("gameplay","totalcoin",!1),n=null==e?0:Number.parseInt(e);n+=this._coin,c.default.instance.send("gameplay","totalcoin",n.toString()),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){s.default.Inst.showWinDlg()}),cc.delayTime(2),cc.callFunc(function(){cc.director.loadScene("lvl_"+(t.currentLevel+2))})))}},e.prototype.onPauseClick=function(){s.default.Inst.showIgmDlg()},e.prototype.onResetClick=function(){cc.director.loadScene("lvl_"+(this.currentLevel+1))},e.prototype.createPreviewWorld=function(){var t=new b2.Vec2(0,-10);this._previewWorld=new b2.World(t,!0)},e.FIX_TIME_PHYSIC=.009,e.FIX_POSITION_ITERATIONS=2,e.FIX_VELOCITY_ITERATIONS=6,e.Instance=null,__decorate([d],e.prototype,"MaxStep",void 0),__decorate([d],e.prototype,"NumDucks",void 0),__decorate([d(cc.Label)],e.prototype,"lableScore",void 0),__decorate([d(cc.Label)],e.prototype,"lableNewLevel",void 0),__decorate([d(cc.Label)],e.prototype,"lableEndLevel",void 0),__decorate([d],e.prototype,"currentLevel",void 0),__decorate([d],e.prototype,"showIntroduce",void 0),n=__decorate([p],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./Entities/Entity":"Entity","./PopUpDlg":"PopUpDlg","./SharkController":"SharkController","./TransportMessage":"TransportMessage","./sound-manager":"sound-manager"}],LoadingManager:[function(t,e,n){"use strict";cc._RF.push(e,"0f13cRfz5RB/IHwbU6SljaM","LoadingManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./event-manager"),i=t("./sound-manager"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblLoading=null,e.isLoadingCompleted=!1,e._step=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;o.default.instance,i.default.instance,o.default.instance.registerOnce("Sound_initialized",function(){t.isLoadingCompleted=!0,cc.director.loadScene("lvl_1")},this)},e.prototype.start=function(){i.default.instance.init()},e.prototype.update=function(){var t=this._step%3;this.lblLoading.string=0==t?"Loading .":1==t?"Loading ..":"Loading ...",this._step++},__decorate([s(cc.Label)],e.prototype,"lblLoading",void 0),__decorate([r],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./event-manager":"event-manager","./sound-manager":"sound-manager"}],Mine:[function(t,e,n){"use strict";cc._RF.push(e,"386bc1xeAxMSawmEccmJUPB","Mine"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.entitysCloseMe=[],e._animation=null,e.MAX_BOMB_RANGE=100,e.isExlosing=!1,e}return __extends(e,t),e.prototype.init=function(){var t=this;this._mTag=o.EntityTag.mine;var e=this.getComponents(cc.PhysicsCircleCollider);e[0].radius<e[1].radius?(e[0].tag=o.EntityTag.mine,e[1].tag=o.EntityTag.mine_radius):(e[1].tag=o.EntityTag.mine,e[0].tag=o.EntityTag.mine_radius),this.node.zIndex=o.LocalZOrder.mine,this._animation=this.getComponent(cc.Animation),this._animation.once("finished",function(){t.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){t.node.removeFromParent()})))})},e.prototype.onExplode=function(){if(!this.isExlosing){this.isExlosing=!0,this.rgbody.awake=!0,this.rgbody.linearVelocity=cc.Vec2.ZERO,this.rgbody.gravityScale=0,this._animation.play("exp");for(var t=this.entitysCloseMe.length,e=0;e<t;e++){var n=this.entitysCloseMe[e];this.node.position.sub(n.position).mag()<this.MAX_BOMB_RANGE&&n.getComponent(o.default).applyDamge(this)}}},e.prototype.onBeginContact=function(t,e,n){e.tag==o.EntityTag.mine_radius&&(n.tag!=o.EntityTag.mine_radius&&n.tag!=o.EntityTag.salt&&n.tag!=o.EntityTag.duck||(t.disabled=!0,this.entitysCloseMe.indexOf(n.node)<0&&this.entitysCloseMe.push(n.node))),e.tag==o.EntityTag.mine&&(n.tag==o.EntityTag.mine||n.tag==o.EntityTag.ball||n.tag==o.EntityTag.shark?this.onExplode():n.tag==o.EntityTag.sponge?this.changeRigidBodyType(cc.RigidBodyType.Dynamic):n.tag==o.EntityTag.salt?this.onExplode():n.tag!=o.EntityTag.greenBlock&&n.tag!=o.EntityTag.monkey||(t.disabled=!0,this.onExplode()))},e.prototype.applyDamge=function(){this.isExlosing||this.onExplode()},e.prototype.onEndContact=function(t,e,n){if(e.tag==o.EntityTag.mine_radius&&(n.tag==o.EntityTag.mine_radius||n.tag==o.EntityTag.salt||n.tag==o.EntityTag.shark||n.tag==o.EntityTag.mine_radius)){var i=this.entitysCloseMe.indexOf(n.node);i>=0&&this.entitysCloseMe.splice(i,1)}},e.prototype.update=function(){this.isExlosing&&(this.rgbody.linearVelocity=cc.Vec2.ZERO)},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],Monkey:[function(t,e,n){"use strict";cc._RF.push(e,"73e61CquvlD8rdhTclJiomr","Monkey"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.monkey,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.sponge},e.prototype.onBeginContact=function(t,e,n){n.tag==o.EntityTag.shark&&this.changeRigidBodyType(cc.RigidBodyType.Dynamic)},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],ParallaxLayer:[function(t,e,n){"use strict";cc._RF.push(e,"017aeJZqsdGK7HGH3CnPFCo","ParallaxLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_camera=null,e.parallaxRatio=cc.Vec2.ZERO,e.first_camPos=null,e.current_camPos=cc.Vec2.ZERO,e}return __extends(e,t),e.prototype.start=function(){this.first_camPos=this.m_camera.node.getPosition()},e.prototype.lateUpdate=function(){this.current_camPos=this.m_camera.node.getPosition();var t=(this.current_camPos.x-this.first_camPos.x)*this.m_camera.zoomRatio,e=(this.current_camPos.y-this.first_camPos.y)*this.m_camera.zoomRatio,n=this.node.getPosition();this.node.position=new cc.Vec2(-n.x+n.x*this.parallaxRatio.x+t,-n.y+n.y*this.parallaxRatio.y+e)},__decorate([a(cc.Camera)],e.prototype,"m_camera",void 0),__decorate([a(cc.Vec2)],e.prototype,"parallaxRatio",void 0),__decorate([i],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],PipeWall:[function(t,e,n){"use strict";cc._RF.push(e,"46c16ZVDSNAf6LA+EOpiCZC","PipeWall"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=t("./Pipe"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInvert=!1,e}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.pipe_wall_1,this.getComponent(cc.PhysicsCollider).tag=this._mTag},e.prototype.onBeginContact=function(t,e,n){if(n.tag==o.EntityTag.shark||n.tag==o.EntityTag.duck||n.tag==o.EntityTag.mine){var a,r=n.getComponent(o.default);r.isInPipe?0==(a=n.body.linearVelocity).x&&0==a.y||r.OnPipeOutTrigger():0==(a=n.body.linearVelocity).x&&0==a.y||this.node.parent.getComponent(i.default).OnInPipe(e,n,this.isInvert)}},__decorate([s],e.prototype,"isInvert",void 0),__decorate([r],e)}(o.default);n.default=c,cc._RF.pop()},{"./Entity":"Entity","./Pipe":"Pipe"}],Pipe:[function(t,e,n){"use strict";cc._RF.push(e,"6b7ed1t91pBxqg3WFDgjxHz","Pipe"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pipeNodes=[],e.entitiesInPipe=[],e.nodeDirs=[],e.MAX_SPEED=1e3,e.ForceOutScale=7500,e.FORCE_OUT_PIPE_SCALE_DUCK=3900,e}return __extends(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.pipeNodes.length;t++)this.nodeDirs.push(this.node.convertToWorldSpaceAR(this.pipeNodes[t].position))},e.prototype.init=function(){this._mTag=o.EntityTag.pipe_outside,this.getComponent(cc.PhysicsCollider).tag=this._mTag},e.prototype.createMoveTo=function(t,e,n){var o=t.sub(e).mag()/n;return cc.moveTo(o,e)},e.prototype.OnInPipe=function(t,e,n){var i=e.node.getComponent(o.default);i.OnPipeInTrigger(),i.rgbody.linearVelocity=cc.Vec2.ZERO;var a=[];a.push(cc.callFunc(function(){i.rgbody.type==cc.RigidBodyType.Dynamic&&(i.rgbody.type=cc.RigidBodyType.Kinematic,i.rgbody.gravityScale=0,i.rgbody.linearVelocity=cc.Vec2.ZERO)}));for(var r=0;r<this.nodeDirs.length;r++){var s=i.node.parent.convertToNodeSpaceAR(this.nodeDirs[n?this.nodeDirs.length-r-1:r]);a.push(this.createMoveTo(i.node.position,s,this.MAX_SPEED))}a.push(cc.callFunc(this.OnEndPipe.bind(this,i,n))),i.node.runAction(cc.sequence(a))},e.prototype.OnEndPipe=function(t,e){var n;t.rgbody.type=cc.RigidBodyType.Dynamic,t.rgbody.gravityScale=10,n=e?this.nodeDirs[0].sub(this.nodeDirs[1]).normalize():this.nodeDirs[this.nodeDirs.length-1].sub(this.nodeDirs[this.nodeDirs.length-2]).normalize(),t.rgbody.linearVelocity=cc.Vec2.ZERO,t._mTag!=o.EntityTag.duck?t.rgbody._b2Body.ApplyForce(n.mul(this.ForceOutScale),t.rgbody._b2Body.GetPosition()):t.rgbody._b2Body.ApplyForce(n.mul(this.FORCE_OUT_PIPE_SCALE_DUCK),t.rgbody._b2Body.GetPosition())},__decorate([r([cc.Node])],e.prototype,"pipeNodes",void 0),__decorate([r],e.prototype,"ForceOutScale",void 0),__decorate([a],e)}(o.default);n.default=s,cc._RF.pop()},{"./Entity":"Entity"}],PopUpDlg:[function(t,e,n){"use strict";cc._RF.push(e,"0ed1eW4IuJP3ZedKxFGdFmH","PopUpDlg"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./LevelMgr"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winDlg=null,e.loseDlg=null,e.igmDlg=null,e.lblWinMessage=null,e.lblWinScore=null,e.lblLoseTotalLvlCleared=null,e.lblLoseScore=null,e.lblIgmLevelInfo=null,e.lblIgmRule=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){this.winDlg.active=!1,this.loseDlg.active=!1,n.Inst=this},e.prototype.start=function(){},e.prototype.showWinDlg=function(){this.winDlg.active=!0,this.lblWinMessage.string="Level "+(o.default.Instance.currentLevel+1)+" cleared",this.lblWinScore.string="Score: "+o.default.Instance.Score},e.prototype.showIgmDlg=function(){this.igmDlg.active=!0},e.prototype.showLoseDlg=function(){this.loseDlg.active=!0},e.prototype.onIgmHomeClick=function(){},e.prototype.onIgmResumeClick=function(){this.igmDlg.active=!1},e.Inst=null,__decorate([r(cc.Node)],e.prototype,"winDlg",void 0),__decorate([r(cc.Node)],e.prototype,"loseDlg",void 0),__decorate([r(cc.Node)],e.prototype,"igmDlg",void 0),__decorate([r(cc.Label)],e.prototype,"lblWinMessage",void 0),__decorate([r(cc.Label)],e.prototype,"lblWinScore",void 0),__decorate([r(cc.Label)],e.prototype,"lblLoseTotalLvlCleared",void 0),__decorate([r(cc.Label)],e.prototype,"lblLoseScore",void 0),__decorate([r(cc.Label)],e.prototype,"lblIgmLevelInfo",void 0),__decorate([r(cc.Label)],e.prototype,"lblIgmRule",void 0),n=__decorate([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./LevelMgr":"LevelMgr"}],Rope:[function(t,e,n){"use strict";cc._RF.push(e,"53a310KVdJP0abceCWPqNYl","Rope"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Chain"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beginChainPrefab=null,e.endPositionMask=null,e.chainPrefab=null,e.entity=null,e.NumChain=0,e.canCut=!1,e._chains=[],e._isCutting=!1,e}return __extends(e,t),e.prototype.start=function(){var t=this.endPositionMask.position.mag();this.NumChain=Math.round(t/10)-1;var e=cc.v2(this.endPositionMask.position.x/t,this.endPositionMask.position.y/t);this.createRope(this.NumChain,e,10),this.entity.zIndex=10},e.prototype.createRope=function(t,e,n){var i=cc.instantiate(this.beginChainPrefab);i.parent=this.node;for(var a=i.position,r=0;r<t;r++){var s=a.add(e.mul(n)),c=cc.instantiate(this.chainPrefab),l=c.getComponent(o.default);this.canCut&&null!=l&&l.enableCut(this);var p=cc.v2(0,0==r?i.getContentSize().height/2:n);i.getComponent(cc.RevoluteJoint).connectedAnchor=p,c.parent=this.node,c.position=s,i.getComponent(cc.RevoluteJoint).connectedBody=c.getComponent(cc.RigidBody),i=c,a=a.add(e.mul(n)),this._chains.push(c)}null!=this.entity&&(p=this.entity.convertToNodeSpaceAR(this.endPositionMask.parent.convertToWorldSpaceAR(this.endPositionMask.position)),i.getComponent(cc.RevoluteJoint).connectedAnchor=p,i.getComponent(cc.RevoluteJoint).connectedBody=this.entity.getComponent(cc.RigidBody))},e.prototype.cutTheRope=function(t){if(!this._isCutting){this._isCutting=!0;var e=this._chains.indexOf(t);if(e>=0)for(var n=this._chains.length-1;n>=e;n--)this._chains[n].removeFromParent()}},__decorate([r(cc.Prefab)],e.prototype,"beginChainPrefab",void 0),__decorate([r(cc.Node)],e.prototype,"endPositionMask",void 0),__decorate([r(cc.Prefab)],e.prototype,"chainPrefab",void 0),__decorate([r(cc.Node)],e.prototype,"entity",void 0),__decorate([r],e.prototype,"canCut",void 0),__decorate([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./Chain":"Chain"}],Salt:[function(t,e,n){"use strict";cc._RF.push(e,"3fa43Tb3rlJp4M93RsIzDC5","Salt"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.salt,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.salt},e.prototype.applyDamge=function(t){var e=this.rgbody.getMass(),n=t.node.position.sub(this.node.position);this.rgbody._b2Body.ApplyForce(n.mul(2700*e),this.rgbody._b2Body.GetPosition())},e.prototype.onBeginContact=function(t,e,n){var i=this;n.tag!=o.EntityTag.mine&&n.tag!=o.EntityTag.mine_radius&&n.tag!=o.EntityTag.duck||this.changeRigidBodyType(cc.RigidBodyType.Dynamic),n.tag==o.EntityTag.warter?this.node.runAction(cc.callFunc(function(){i.node.removeFromParent()})):n.tag==o.EntityTag.shark&&(t.setRestitution(0),this.changeRigidBodyType(cc.RigidBodyType.Dynamic))},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],SharkAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"019e0Z76LJHWrsZJwyDElRF","SharkAnimation"),Object.defineProperty(n,"__esModule",{value:!0}),n.SharkAnim=void 0;var o=cc._decorator,i=o.ccclass;o.property,function(t){t[t.idle=0]="idle",t[t.strech=1]="strech"}(n.SharkAnim||(n.SharkAnim={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e.MaxStrechClips=51,e.MaxDistance=1e4,e.MixDistance=1550,e._currentStrectAnimId=0,e}return __extends(e,t),e.prototype.start=function(){this._animation=this.getComponent(cc.Animation)},e.prototype.playPipeAnim=function(){this._animation.play("rotate_in_pipe")},e.prototype.playIdleAnim=function(){this._animation.play("idle"),this.node.setAnchorPoint(.5,.5)},e.prototype.playStrechAnim=function(t){this._currentStrectAnimId=Math.round((t-this.MixDistance)*this.MaxStrechClips/this.MaxDistance),this._playStrectAnim(this._currentStrectAnimId)},e.prototype._playStrectAnim=function(t){if(!(t<1)){t>this.MaxStrechClips&&(t=this.MaxStrechClips);var e;e=t<10?"strech_00"+t:"strech_0"+t,this._animation.play(e),this.node.setAnchorPoint(.9,.5)}},__decorate([i],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],SharkController:[function(t,e,n){"use strict";cc._RF.push(e,"5a14b0nes9OeJJ3Nis9k6J6","SharkController"),Object.defineProperty(n,"__esModule",{value:!0}),n.SharkState=void 0;var o,i=t("./CameraController"),a=t("./Entities/Entity"),r=t("./LevelMgr"),s=t("./SharkAnimation"),c=t("./PopUpDlg"),l=cc._decorator,p=l.ccclass,d=l.property;(function(t){t[t.k_inactive=0]="k_inactive",t[t.k_standing=1]="k_standing",t[t.k_idle=2]="k_idle",t[t.k_moving=3]="k_moving",t[t.k_grabbed=4]="k_grabbed",t[t.k_released=5]="k_released",t[t.k_exploded=6]="k_exploded",t[t.k_outWater=7]="k_outWater",t[t.k_stuck=8]="k_stuck",t[t.k_dead=9]="k_dead",t[t.k_none=10]="k_none"})(o=n.SharkState||(n.SharkState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.previewPoint=null,e.display=null,e.touchInput=null,e.isActive=!0,e.id=0,e.RADIUS=60,e.MIN_DISTANCE_FORCE=20,e.MAX_DISTANCE_FORCE=320,e.m_state=o.k_inactive,e.needUpdatePreviewPoint=!1,e.previewPointArray=[],e.previewPointSprite=[],e.prev_velocity=cc.Vec2.ZERO,e.k_sharkForceFactor=1.8,e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this.m_state},enumerable:!1,configurable:!0}),e.prototype.init=function(){this._mTag=a.EntityTag.shark,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=a.LocalZOrder.shark},e.prototype.OnPipeTrigger=function(){this.isInPipe=!0,this.display.getComponent(s.default).playPipeAnim()},e.prototype.onLoad=function(){this.m_state=o.k_idle},e.prototype.setState=function(t,e){if(this.m_state!=t)switch(this.m_state=t,this.m_state){case o.k_idle:this.display.getComponent(s.default).playIdleAnim();break;case o.k_grabbed:r.default.Instance.onChangedShark(this),this.display.getComponent(s.default).playStrechAnim(e);break;case o.k_moving:default:this.display.getComponent(s.default).playIdleAnim()}},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.isActive&&r.default.Instance.onChangedShark(this);for(var n=0;n<10;n++){var o=cc.instantiate(this.previewPoint);o.parent=this.node.parent,this.previewPointSprite.push(o),o.active=!1}this.touchInput.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.touchInput.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchInput.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchInput.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancle,this),this.node.runAction(cc.callFunc(function(){e.createPreviewBody(r.default.Instance.previewWorld)}))},e.prototype.ApplyAbsoluteForce=function(t,e){t._b2Body.ApplyForce(new b2.Vec2(e.x,e.y),t._b2Body.GetTransform().GetPosition())},e.prototype.hidePreviewPath=function(){this.previewPointArray.length=0;for(var t=0;t<this.previewPointSprite.length;t++)this.previewPointSprite[t].active=!1},e.prototype.onTouchCancle=function(){this.hidePreviewPath()},e.prototype.onTouchBegan=function(t){r.default.Instance.State==r.LevelState.Play&&this.node.convertToNodeSpaceAR(i.default.Instance.camera.getCameraToWorldPoint(t.getLocation(),null)).mag()<this.RADIUS&&this.setState(o.k_grabbed,0)},e.prototype.onTouchEnd=function(t){if(r.default.Instance.State==r.LevelState.Play){if(this.rgbody.active=!0,this.m_state==o.k_grabbed){var e=this.node.parent.convertToNodeSpaceAR(i.default.Instance.camera.getCameraToWorldPoint(t.getLocation(),null));this.ApplyAbsoluteForce(this.rgbody,this.getForce(e,!1)),this.setState(o.k_moving,0)}this.hidePreviewPath()}},e.prototype.updateDisplayAngleFollowGrabbbForce=function(t){var e=cc.misc.radiansToDegrees(t.angle(cc.v2(1,0)));t.y<0&&(e=360-e),e<90?this.display.setScale(1,1):e<270?this.display.setScale(1,-1):this.display.setScale(1,1),this.display.setRotation(360-e)},e.prototype.updateDisplayAngleFollowVelocity=function(){if(this.m_state!=o.k_grabbed){var t=this.rgbody.linearVelocity;if(Math.abs(t.y)<350)this.display.setRotation(this.display.scaleY>0?0:180);else{var e=cc.misc.radiansToDegrees(Math.atan2(-t.y,t.x));this.display.setRotation(e)}}},e.prototype.onTouchMove=function(t){if(r.default.Instance.State==r.LevelState.Play&&this.m_state==o.k_grabbed){this.rgbody.active=!1;var e=t.getPreviousLocation(),n=t.getLocation(),a=(e.sub(n),this.node.parent.convertToNodeSpaceAR(i.default.Instance.camera.getCameraToWorldPoint(t.getLocation(),null))),c=this.rgbody._b2Body.GetTransform();this.previewBody.SetTransform(c);var l=this.getForce(a,!1);this.updateDisplayAngleFollowGrabbbForce(l),this.display.getComponent(s.default).playStrechAnim(l.mag()),this.previewBody.SetAwake(!1),this.previewBody.SetLinearVelocity(new b2.Vec2(0,0)),this.previewBody.ApplyForce(new b2.Vec2(l.x,l.y),c.GetPosition()),this.previewPointArray.length=0;for(var p=0;p<20;++p){r.default.Instance.previewWorld.Step(r.default.FIX_TIME_PHYSIC,r.default.FIX_VELOCITY_ITERATIONS,r.default.FIX_POSITION_ITERATIONS);var d=this.previewBody.GetPosition(),u=this.node.parent.convertToNodeSpaceAR(cc.v2(32*d.x,32*d.y));this.previewPointArray.push(u)}}},e.prototype.getForce=function(t){var e=this.rgbody.getMass(),n=this.node.position,o=n.sub(t).mag();o>345&&(o=345);var i=Math.sqrt(o),a=n.sub(t);a=a.normalizeSelf(),cc.log(a,o);var r=a.mul(i*e*o*this.k_sharkForceFactor);return t.y>n.y&&(t.y,n.y,r=r.mul(2.1)),r},e.prototype.lateUpdate=function(){for(var t=0;t<this.previewPointArray.length;t+=2){var e=t/2;e<this.previewPointSprite.length&&(this.previewPointSprite[e].active=!0,this.previewPointSprite[e].position=this.previewPointArray[t],this.previewPointSprite[e].scale=1-.02*t)}this.prev_velocity=this.rgbody.linearVelocity,this.updateDisplayAngleFollowVelocity();var n=this.rgbody.linearVelocity;this.m_state==o.k_moving&&n.mag()<100&&this.setState(o.k_idle,0),this.node.y<-300&&o.k_dead!=this.m_state&&(this.setState(o.k_dead,0),c.default.Inst.showLoseDlg())},e.prototype.getWorkSpacePosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},__decorate([d(cc.Prefab)],e.prototype,"previewPoint",void 0),__decorate([d(cc.Node)],e.prototype,"display",void 0),__decorate([d(cc.Node)],e.prototype,"touchInput",void 0),__decorate([d],e.prototype,"isActive",void 0),__decorate([d],e.prototype,"id",void 0),__decorate([p],e)}(a.default);n.default=u,cc._RF.pop()},{"./CameraController":"CameraController","./Entities/Entity":"Entity","./LevelMgr":"LevelMgr","./PopUpDlg":"PopUpDlg","./SharkAnimation":"SharkAnimation"}],SpeedFloater:[function(t,e,n){"use strict";cc._RF.push(e,"13cb2M2S0BLvKQel12GaYXu","SpeedFloater"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frontDisplay=null,e.scaleForce=9e3,e.entityParent=null,e}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.speedFloater,this.getComponents(cc.PhysicsCircleCollider).forEach(function(t){t.tag=o.EntityTag.speedFloaterBound});var t=this.getComponent(cc.PhysicsChainCollider);t?t.tag=this._mTag:this.getComponent(cc.PhysicsBoxCollider).tag=this._mTag;var e=this.getComponent(cc.PhysicsPolygonCollider);e&&(e.tag=o.EntityTag.speedFloater4ChangeZindex),this.node.zIndex=o.LocalZOrder.speedFloaterBack},e.prototype.onBeginContact=function(t,e,n){if(e.tag==o.EntityTag.speedFloaterBound&&(n.tag!=o.EntityTag.sponge&&n.tag!=o.EntityTag.shark||this.changeRigidBodyType(cc.RigidBodyType.Dynamic)),e.tag==o.EntityTag.speedFloater&&(n.tag==o.EntityTag.shark||n.tag==o.EntityTag.duck)){var i=n.node.getComponent(o.default),a=e.body._b2Body.GetAngle(),r=cc.v2(Math.cos(a),Math.sin(a)),s=n.body.linearVelocity.dot(r),c=cc.Vec2.ZERO;0!=s&&(c=(c=(c=r.mul(s)).normalizeSelf()).mul(n.body.getMass()*this.scaleForce)),this.node.runAction(cc.callFunc(function(){n.body._b2Body.SetPosition(e.body._b2Body.GetPosition()),i.rgbody._b2Body.SetAwake(!1),i.rgbody._b2Body.ApplyForce(c,i.rgbody._b2Body.GetPosition())}))}e.tag==o.EntityTag.speedFloater4ChangeZindex&&n.tag==o.EntityTag.shark&&(this.entityParent=n.node.parent,n.node.parent=this.frontDisplay.parent,this.frontDisplay.zIndex=cc.macro.MAX_ZINDEX)},e.prototype.onEndContact=function(t,e,n){e.tag==o.EntityTag.speedFloater4ChangeZindex&&n.tag==o.EntityTag.shark&&(n.node.parent=this.entityParent)},__decorate([r(cc.Node)],e.prototype,"frontDisplay",void 0),__decorate([r],e.prototype,"scaleForce",void 0),__decorate([a],e)}(o.default);n.default=s,cc._RF.pop()},{"./Entity":"Entity"}],Sphere:[function(t,e,n){"use strict";cc._RF.push(e,"abe44W6HYxJtIQXcQTbjFwh","Sphere"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){},__decorate([i],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],Sponge:[function(t,e,n){"use strict";cc._RF.push(e,"6f640Yu+A1CYZPrlrOqmpPC","Sponge"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Entity"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._mTag=o.EntityTag.sponge,this.getComponent(cc.PhysicsCollider).tag=this._mTag,this.node.zIndex=o.LocalZOrder.sponge},e.prototype.onBeginContact=function(t,e,n){n.tag==o.EntityTag.shark||n.tag==o.EntityTag.dynSponge||n.tag==o.EntityTag.duck||n.tag==o.EntityTag.inflatable?(t.disabledOnce=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic),t.setFriction(0),n.tag==o.EntityTag.shark?t.setRestitution(.4):t.setRestitution(0)):n.tag==o.EntityTag.sponge?(t.disabledOnce=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic)):n.tag==o.EntityTag.greenBlock&&(t.disabledOnce=!0,this.changeRigidBodyType(cc.RigidBodyType.Dynamic))},__decorate([a],e)}(o.default));n.default=r,cc._RF.pop()},{"./Entity":"Entity"}],TouchManager:[function(t,e,n){"use strict";cc._RF.push(e,"2f98fC8extKnZvBi1kKnV/N","TouchManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancle,this)},e.prototype.onTouchCancle=function(){cc.log("--cancle---")},e.prototype.onTouchBegan=function(){},e.prototype.onTouchEnd=function(){cc.log("--onTouchEnd---")},e.prototype.onTouchMove=function(){},__decorate([i],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],TransportMessage:[function(t,e,n){"use strict";cc._RF.push(e,"3c858zTJnVAA5spxkxysQoi","TransportMessage"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._messages={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.send=function(t,e,n){void 0===n&&(n=""),this._messages[t]||(this._messages[t]={}),this._messages[t][e]=n},t.prototype.get=function(t,e,n){return void 0===n&&(n=!0),this._messages[t]&&null!=this._messages[t][e]?this._messages[t][e]:null},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],WaterColumn:[function(t,e,n){"use strict";cc._RF.push(e,"df4faA/ERxNML3ZAUb0VkDp","WaterColumn"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.displayNode=null,this.Height=t,this.TargetHeight=e,this.Speed=n}return t.prototype.Update=function(t,e,n){var o=this.TargetHeight-this.Height;this.Speed+=e*o-this.Speed*t,this.Height+=this.Speed,this.displayNode.height=this.Height+n},t}();n.default=o,cc._RF.pop()},{}],WaterPhysic:[function(t,e,n){"use strict";cc._RF.push(e,"81f29zD/EBOTI95uiVPxf7c","WaterPhysic"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./b2ShapeExternd"),i=t("./WaterSurface"),a=t("./Entities/Entity"),r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_bodyList=[],e.gravity=new b2.Vec2(0,320),e.normal=new b2.Vec2(0,1),e.offset=256,e.velocity=new b2.Vec2(0,0),e.useDensity=!1,e}return __extends(e,t),e.prototype.start=function(){this.offset=o.default.ptm(this.getComponent(cc.PhysicsBoxCollider).size.height+this.node.position.y)+3,cc.log(this.offset),this.gravity=cc.v2(cc.director.getPhysicsManager().gravity.x,-cc.director.getPhysicsManager().gravity.y),this.getComponent(cc.PhysicsCollider).tag=a.EntityTag.warter},e.prototype.onBeginContact=function(t,e,n){if(n.tag==a.EntityTag.shark||n.tag==a.EntityTag.sponge||n.tag==a.EntityTag.dynSponge||n.tag==a.EntityTag.speedFloaterBound||n.tag==a.EntityTag.monkey||n.tag==a.EntityTag.greenBlock||n.tag==a.EntityTag.ball||n.tag==a.EntityTag.inflatable||n.tag==a.EntityTag.duck){var o=n.body._b2Body;this.m_bodyList.push(o),t.disabled=!0,this.getComponent(i.default).Splash(n.body.node.position,n.body.linearVelocity.y/10),n.node.getComponent(a.default).onEnterWater()}},e.prototype.onEndContact=function(t,e,n){var o=n.body._b2Body,i=this.m_bodyList.indexOf(o);i>=0&&this.m_bodyList.splice(i,1),t.disabled=!0,n.node.getComponent(a.default).onLeaveWater()},e.prototype.Step=function(){if(this.m_bodyList&&!(this.m_bodyList.length<1))for(var t=2,e=7,n=this.m_bodyList.length,o=0;o<n;o++){var i=new b2.Vec2(0,0),r=new b2.Vec2(0,0),s=0,c=0,l=this.m_bodyList[o];if(0!=l.IsAwake()){for(var p=l.body.node.getComponent(a.default)._mTag,d=l.GetFixtureList();d;d=d.GetNext())if(p!=a.EntityTag.speedFloater||2!=d.GetShape().GetType()){var u,h=new b2.Vec2(0,0),y=0;y=d.GetShape().ComputeSubmergedArea(this.normal,this.offset,l.GetTransform(),h),s+=y/=l.body.node.getComponent(a.default).reduceWaterPhysicForce,i.x+=y*h.x,i.y+=y*h.y,c+=y*(u=this.useDensity?d.GetDensity():1),r.x+=y*h.x*u,r.y+=y*h.y*u}if(!(s<Number.MIN_VALUE)){i.x/=s,i.y/=s,r.x/=c,r.y/=c,p==a.EntityTag.shark&&(t=2,e=22);var g=new b2.Vec2(0,320);g.SelfMul(t*s),l.ApplyForce(g,i);var _=new b2.Vec2;l.GetLinearVelocityFromWorldPoint(i,_),_=(_=_.SelfSub(this.velocity)).SelfMul(-e*s),l.ApplyForce(_,i),l.ApplyTorque(-l.GetInertia()/l.GetMass()*s*l.GetAngularVelocity()*10)}}}},e.prototype.update=function(t){this.Step(t)},__decorate([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{"./Entities/Entity":"Entity","./WaterSurface":"WaterSurface","./b2ShapeExternd":"b2ShapeExternd"}],WaterSurface:[function(t,e,n){"use strict";cc._RF.push(e,"ba7a2JtFIhA7YF8XvgaivJX","WaterSurface"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./WaterColumn"),i=t("./Entities/DropLet"),a=t("./Entities/Entity"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftNode=null,e.rightNode=null,e.waterPrefab=null,e.dropletPrefab=null,e.Width=0,e.columns=null,e.NUM_COLUMNS=240,e.NUM_BACKGROUND_WAVES=3,e.BACKGROUND_WAVE_MAX_HEIGHT=3,e.BACKGROUND_WAVE_COMPRESSION=.1,e.Tension=.025,e.Dampening=.025,e.Spread=.25,e.offset=0,e.sineOffsets=[],e.sineAmplitudes=[],e.sineStretches=[],e.offsetStretches=[],e.dropLets=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.Width=this.rightNode.position.x-this.leftNode.position.x;for(var t=0;t<this.NUM_BACKGROUND_WAVES;t++){var e=-Math.PI+2*Math.PI*Math.random();this.sineOffsets.push(e);var n=Math.random()*this.BACKGROUND_WAVE_MAX_HEIGHT;this.sineAmplitudes.push(n);var o=Math.random()*this.BACKGROUND_WAVE_COMPRESSION;this.sineStretches.push(o);var i=Math.random()*this.BACKGROUND_WAVE_COMPRESSION;this.offsetStretches.push(i)}},e.prototype.start=function(){this.columns=this.makeWaveColumns(),this.node.zIndex=a.LocalZOrder.water},e.prototype.makeWaveColumns=function(){for(var t=[],e=this.leftNode.position.x,n=this.Width/this.NUM_COLUMNS,i=0;i<this.NUM_COLUMNS;i++){var a=new o.default(256,256,0);a.displayNode=cc.instantiate(this.waterPrefab),a.displayNode.parent=this.node,a.displayNode.position=cc.v2(e,-128),a.displayNode.width=n,t.push(a),e+=n}return t},e.prototype.overlapSines=function(t){for(var e=0,n=0;n<this.NUM_BACKGROUND_WAVES;n++)e=e+this.sineOffsets[n]+this.sineAmplitudes[n]*Math.sin(t*this.sineStretches[n]+this.offset*this.offsetStretches[n]);return e},e.prototype.Splash=function(t,e){var n=t.x,o=Math.round((n-this.leftNode.x)*this.NUM_COLUMNS/this.Width);o>=this.NUM_COLUMNS&&(o=this.NUM_COLUMNS);for(var i=Math.max(0,o-0);i<Math.min(this.NUM_COLUMNS-1,o+1);i++)this.columns[o].Speed=e;this.CreateSplashParticles(t,e)},e.prototype.CreateSplashParticles=function(t,e){var n=Math.abs(e);if(e<-50)for(var o=Math.round(n/8),a=0;a<o;a++){var r=cc.v2(t.x,160).add(this.GetRandomVector2(40)),s=this.FromPolar(cc.misc.degreesToRadians(this.GetRandomFloat(-150,-30)),this.GetRandomFloat(0,.5*Math.sqrt(n))),c=cc.instantiate(this.dropletPrefab);c.getComponent(i.default).Velocity=s,c.parent=this.node,c.position=r}},e.prototype.GetAngle=function(t){return Math.atan2(-t.y,t.x)},e.prototype.GetRandomVector2=function(t){return this.FromPolar(this.GetRandomFloat(-Math.PI,Math.PI),this.GetRandomFloat(0,t))},e.prototype.FromPolar=function(t,e){return cc.v2(Math.cos(t),Math.sin(t)).mul(e)},e.prototype.GetRandomFloat=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){this.offset=this.offset+1;for(var t=0;t<this.NUM_COLUMNS;t++)this.columns[t].Update(this.Dampening,this.Tension,this.overlapSines(t));for(var e=new Array(this.NUM_COLUMNS),n=new Array(this.NUM_COLUMNS),o=0;o<8;o++){for(var i=0;i<this.NUM_COLUMNS;i++)i>0&&(e[i]=this.Spread*(this.columns[i].Height-this.columns[i-1].Height),this.columns[i-1].Speed+=e[i]),i<this.NUM_COLUMNS-1&&(n[i]=this.Spread*(this.columns[i].Height-this.columns[i+1].Height),this.columns[i+1].Speed+=n[i]);for(i=0;i<this.NUM_COLUMNS;i++)i>0&&(this.columns[i-1].Height+=e[i]),i<this.NUM_COLUMNS-1&&(this.columns[i+1].Height+=n[i])}},__decorate([c(cc.Node)],e.prototype,"leftNode",void 0),__decorate([c(cc.Node)],e.prototype,"rightNode",void 0),__decorate([c(cc.Prefab)],e.prototype,"waterPrefab",void 0),__decorate([c(cc.Prefab)],e.prototype,"dropletPrefab",void 0),__decorate([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./Entities/DropLet":"DropLet","./Entities/Entity":"Entity","./WaterColumn":"WaterColumn"}],b2ShapeExternd:[function(t,e,n){"use strict";cc._RF.push(e,"32155sXpdtA+7JTuGFTKN7q","b2ShapeExternd"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(){function t(){}var e;return e=t,t.ptm=function(t){return t/this.PTM_RATIO},t.mtp=function(t){return t*this.PTM_RATIO},t.Cricle_ComputeSubmergedArea=function(t,e,n,o,i){var a=b2.Mul_t_v2(o,t.m_p),r=-(b2.Dot_v2_v2(e,a)-n);if(r<-t.m_radius+b2.epsilon)return 0;if(r>t.m_radius)return i.Set(a.x,a.y),Math.PI*t.m_radius*t.m_radius;var s=t.m_radius*t.m_radius,c=r*r,l=s*(Math.asin(r/t.m_radius)+Math.PI/2)+r*Math.sqrt(s-c),p=-2/3*Math.pow(s-c,1.5)/l;return i.x=a.x+e.x*p,i.y=a.y+e.y*p,l},t.PTM_RATIO=32,t.b2MathMulMV=function(t,e){return new b2.Vec2(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},t.b2MathMulX=function(t,n){var o=e.b2MathMulMV(t.R,n);return o.x+=t.position.x,o.y+=t.position.y,o},e=__decorate([i],t)}());n.default=a,cc._RF.pop()},{}],"event-manager":[function(t,e,n){"use strict";cc._RF.push(e,"5dee9enMOBJDb5U/ReanrJm","event-manager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.eventListenners={}}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=0),void 0===i&&(i=!1);var a={target:n,callback:e,priority:o,excuteOnce:i};return this.eventListenners[t]?this.eventListenners[t].push(a):(this.eventListenners[t]=[],this.eventListenners[t].push(a)),this.eventListenners[t].sort(function(t,e){return e.priority-t.priority}),e},t.prototype.registerOnce=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=0),this.register(t,e,n,o,!0)},t.prototype.unregister=function(t,e,n){if(void 0===n&&(n=null),this.eventListenners[t]){for(var o=[],i=0;i<this.eventListenners[t].length;i++){var a=this.eventListenners[t][i];null==e?a.target==n&&o.push(i):a.target==n&&a.callback==e&&o.push(i)}this.eventListenners[t]=this.eventListenners[t].filter(function(t,e){return-1===o.indexOf(e)}),0==this.eventListenners[t].length&&delete this.eventListenners[t]}},t.prototype.unregisterTarget=function(t){var e=function(e){for(var o=[],i=0;i<n.eventListenners[e].length;i++)n.eventListenners[e][i].target==t&&o.push(i);n.eventListenners[e]=n.eventListenners[e].filter(function(t,e){return-1===o.indexOf(e)}),0==n.eventListenners[e].length&&delete n.eventListenners[e]},n=this;for(var o in this.eventListenners)e(o)},t.prototype.remove=function(t){this.eventListenners[t]&&delete this.eventListenners[t]},t.prototype.dispatch=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(this.eventListenners[t]){var i=[];this.eventListenners[t].forEach(function(t){t.target?t.callback.call(t.target,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]):t.callback(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]),1==t.excuteOnce&&i.push(t)}),i.forEach(function(n){e.unregister(t,n.callback,n.target)})}},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],"sound-manager":[function(t,e,n){"use strict";cc._RF.push(e,"7f9677o9utP35iKZQQo+tXn","sound-manager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,t("./event-manager")),r=function(){function t(){this.sounds={},this.playingSounds={},this.initialized=!1,this.enable=!0,this.DEBUG_LOG=!0}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),t.prototype.setEnable=function(t){cc.sys.localStorage.setItem("Sound_enable",t?1:0)},t.prototype.log=function(t){this.DEBUG_LOG&&cc.log(t)},t.prototype.error=function(t){this.DEBUG_LOG&&cc.error(t)},t.prototype.init=function(){var t=this;cc.loader.loadResDir("sounds",function(e,n,o){o.length>0&&(n.forEach(function(e,n){-1!=o[n].indexOf("sounds")&&(t.sounds[e.name]=e)}),t.initialized=!0,t.enable=!cc.sys.localStorage.getItem("Sound_enable")||1==parseInt(cc.sys.localStorage.getItem("Sound_enable")),cc.log("sound init"),a.default.instance.dispatch("Sound_initialized"))})},t.prototype.playMusic=function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=1),this.enable&&this.initialized)if(t=t.toLowerCase(),this.isPlaying(t))this.log("clipName: "+t+" already played");else if(this.sounds[t]){this.log("play music: "+t);var o=cc.audioEngine.play(this.sounds[t],e,n);this.playingSounds[t]=o}else this.error("playMusic - clipName: "+t+" not found")},t.prototype.playEffect=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=1),this.enable&&this.initialized)if(t=t.toLowerCase(),this.sounds[t]){this.log("play effect: "+t);var o=cc.audioEngine.play(this.sounds[t],e,n);this.playingSounds[t]=o}else this.error("playEffect - clipName: "+t+" not found")},t.prototype.playRandom=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=1),this.enable&&this.initialized){var o=Math.floor(cc.random0To1()*t.length),i=t[o].toLowerCase();if(this.sounds[i]){this.log("play random: "+i);var a=cc.audioEngine.play(this.sounds[i],e,n);this.playingSounds[i]=a}else this.error("playRandom - clipName: "+t[o]+" not found")}},t.prototype.pause=function(t){this.enable&&(t=t.toLowerCase(),null!=this.playingSounds[t]?cc.audioEngine.pause(this.playingSounds[t]):this.error("Pause sound: "+t+" is not in playing list"))},t.prototype.resume=function(t){this.enable&&(t=t.toLowerCase(),null!=this.playingSounds[t]?cc.audioEngine.resume(this.playingSounds[t]):this.error("Resume sound: "+t+" is not in playing list"))},t.prototype.stop=function(t){this.enable&&(this.log("stop sound: "+t),t=t.toLowerCase(),null!=this.playingSounds[t]?(cc.audioEngine.stop(this.playingSounds[t]),delete this.playingSounds[t]):this.error("Stop sound: "+t+" is not in playing list"))},t.prototype.isPlaying=function(t){return t=t.toLowerCase(),null!=this.playingSounds[t]&&cc.audioEngine.getState(this.playingSounds[t])==cc.audioEngine.AudioState.PLAYING},t.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){this.enable&&cc.audioEngine.resumeAll()},t.prototype.stopAll=function(){this.enable&&cc.audioEngine.stopAll()},t._instance=null,e=__decorate([i],t)}();n.default=r,cc._RF.pop()},{"./event-manager":"event-manager"}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"7c4ccGmLBBKiqsHrUjekDNi","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","CameraController","Ball","BathClip","Chain","DropLet","Duck","DynSponge","Entity","GoldenCoin","GreenBlock","Inflatable","Mine","Monkey","Pipe","PipeWall","Rope","Salt","SpeedFloater","Sponge","Global","InputMgr","LevelMgr","LoadingManager","ParallaxLayer","PopUpDlg","SharkAnimation","SharkController","Sphere","TouchManager","TransportMessage","WaterColumn","WaterPhysic","WaterSurface","b2ShapeExternd","event-manager","sound-manager"]);